#!/bin/sh

BOLD="\033[1m"
GREEN="\033[32m"
RED="\033[31m"
YELLOW="\033[33m"
BLUE="\033[34m"
GRAY="\033[90m"
RESET="\033[0m"

divider() {
  echo "${GRAY}â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€${RESET}"
}

stage() {
  echo ""
  divider
  echo "${BOLD}${BLUE}ğŸš€ Step $1${RESET} ${BOLD}${2}${RESET}"
  divider
  echo ""
}

stage "1/1" "Commit Message Validation"

echo "ğŸ“ Checking commit message format..."
pnpm commitlint --edit "$1" || {
  echo ""
  echo "${RED}âŒ Invalid commit message format!${RESET}"
  echo ""
  divider
  echo "${BOLD}${YELLOW}ğŸ“‹ Conventional Commit Example${RESET}"
  echo "   feat: add logger core"
  echo "   fix: handle edge runtime detection"
  echo "   docs: update README with usage examples"
  echo "   chore: update dependencies"
  echo ""
  divider
  echo "${YELLOW}ğŸ’¡ Please fix your commit message and try again.${RESET}"
  echo ""
  exit 1
}

echo "${GREEN}âœ… Commit message validation passed!${RESET}"
echo ""
divider
echo "${GRAY}(Great commit messages lead to great releases ğŸš€)${RESET}"
echo ""